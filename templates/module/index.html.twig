{% extends 'base.html.twig' %}

{% block title %}
	Module
{% endblock %}

{% block additional_css %}
	{% if module is null %}
		<link rel="stylesheet" href="{{ asset('css/section.css') }}">
		<link rel="stylesheet" href="{{ asset('css/pagination.css') }}">
	{% else %}
		<link rel="stylesheet" href="{{ asset('css/infos-section.css') }}">
	{% endif %}
{% endblock %}

{% block body %}

	<h1>Module</h1>

	{% if module is null %}

		{# ROLE_ADMIN : Lien pour ajouter un module /module/new #}
		{% if is_granted('ROLE_ADMIN') %}

			<a class="btn" href="{{ path('new_module')}}">Ajouter un module</a>

		{% endif %}

		<h2>Les modules</h2>

		{# Affiche la liste de toutes les modules sous forme de lien vers les infos d'un module spécifique #}
		<div class="items">
			{% for module in modules %}
				<a href="{{ path('infos_module', {'id' : module.id}) }}">{{ module }}</a>
			{% endfor %}
		</div>

		<div class="navigation">
			{{ knp_pagination_render(modules) }}
		</div>

	{% else %}

		<a href="{{ path('app_module')}}">Retour à la liste</a>

		<h2>Informations :</h2>

		<p>Module :
			{{ module.nom }}</p>

		{# Affiche la catégorie du module sélectionné sous forme de lien vers le module en question #}
		<p>Catégorie :
			<a href="{{ path('infos_categorie', {'id': module.categorie.id}) }}">{{ module.categorie }}</a>
		</p>

		{# ROLE_ADMIN : Lien pour modifier/supprimer un module  #}
		{% if is_granted('ROLE_ADMIN') %}

			<a href="{{ path('edit_module', {'id' : module.id}) }}">Modifier</a>
			<a class="confirm-delete" href="{{ path('delete_module', {'id' : module.id}) }}">Supprimer</a>

		{% endif %}

	{% endif %}

{% endblock %}
